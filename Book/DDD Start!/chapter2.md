## 아키텍처 개요
### 아키텍처
- 아키텍처는 상위 계층에서 하위 계층으로 이어지는 순서는 표현영역(presentation, ui) - 응용영역(application) - 도메인영역(domain) - 인프라스트럭처(infra) 이다.
- 상위 계층에서 하위 계층을 의존하는건 되지만 하위계층에서 상위계층을 의존하면 안된다. (수정에 따른 영향도 때문으로 생각됨)
### DIP
- 의존 역전 규칙 (DI랑 지꾸 헷갈린다. DI 는 Dependency Injection, DIP는 Dependency Inversion Principle)
- 예전에 처음 들었을때 의존 역전한다는게 뭔말이지 했는데 여러 경험과 공부를 한 결과 이해가 됐다. (이전의 경험을 생각하면 우테캠 지하철 노선도 때의 최단거리 노선 알고리즘 구현체)
- 응용영역에서 다른 도메인 서비스 (책에선 외부 서비스와 연결된 할인정책 구현체 (infra 영역))에 의존한다고 했을때, 이 도메인서비스 수정에 따라 응용영역도 같이 수정이 되는 상황이 발생.
- 이 문제를 해결하기 위한 것이 DIP로 구현체의 추상체(interface)를 생성해서 응용서비스가 interface를 의존하고 구현체가 interface를 의존하게 만드는것.
- interface는 구현체와 같은 계층에 있으면 의미가 없다. 구현체의 상위 계층에 존재해야 DIP가 완성이 된다.
### 도메인 영역의 주요 구성요소
- 엔티티 : 식별자 갖는 객체 도메인의 고유한 개념을 표현한다.
- 밸류 : 식별자를 갖고 있지않다. 도메인 객체의 속성을 표현할 때 사용된다.
- 애그리거트 : 도메인주도설계에서 제일 중요하고 어려운 부분이 아닐까... 도메인의 엔티티와 밸류를 하나로 묶은 개념
- 리포지토리 : 도메인 모델의 영속성 처리 (애그리거트 단위로 구성됨)
- 도메인서비스 : 이부분은 아직도 이해가 안된다. 책에서는 특정 엔티티에 속하지 않은 도메인 로직을 제공한다. 라고 나오는데 하나의 엔티티 클래스에 로직 담기가 어려워서 (2개의 엔티티가 사용되거나 등) 
도메인 서비스라는걸 만들어서 사용하는건가 생각된다. 응용영역에서 하면 되지 않나 라고 생각될 수 있지만 응용영역은 로직을 처리하는 부분이 아니라고 생각된다. (레포지토리와 도메인을 연결하는 브릿지 같은 개념이지 않을까)
### 인프라스트럭처
- 책에서는 JPA 구현체 부분을 담았다. 요즘은 spring data jpa를 사용하여 interface에서 jpa를 전부 처리하지만, 책에서는 mybatis 와 jpa 등 하나만 사용하지 않고 여러가지 사용하여 구현체를 infradp 담았다.
- 외부 연결 모듈, 예를 들어 메일 전송이나 외부 api 처리등은 이 영역에서 해야한다.
### 모듈
- 패키지 구조라고 생각해도 되는데 영역별로 모듈을 구성하는게 보통이다.
- 도메인이 클 경우, 도메인 안에서 영역을 세부적으로 나눠도 된다.
